{% extends 'joltem/base.html' %}
{% block content %}
    <h3>{{ project.name }}</h3>
    <h4>Repositories</h4>
    {% if created_repo %}
        <p class="alert alert-success">
            <button type="button" class="close" data-dismiss="alert">&times;</button>
            Created : {{ created_repo.name }}
        </p>
    {% endif %}
    {% if removed_repo %}
        <p class="alert alert-danger">
            <button type="button" class="close" data-dismiss="alert">&times;</button>
            Removed : {{ removed_repo.name }}
        </p>
    {% endif %}
    <form method="post" class="form-inline">
        {% csrf_token %}
        <p>
            <input type="text" name="name" placeholder="Name, i.e. git-server"/>
            <input type="text" class="input-xxlarge" name="description" placeholder="Description of repository."/>
            <button class="btn btn-success" type="submit" name="action" value="create_repo">Create</button>
        </p>
        {% for repo in project.repository_set.all %}
            <button class="btn btn-small btn-danger pull-left" type="submit" name="remove_repo" value="{{ repo.id }}">Remove</button>
            <p class="offset1">
                <a href="{% url 'repository' repo.name %}">{{ repo.name }}</a><br/>
                {{ repo.description }}
            </p>
        {% endfor %}
    </form>
    <hr/>
    <h4>Tasks</h4>
    {% if created_task %}
        <p class="alert alert-success">
            <button type="button" class="close" data-dismiss="alert">&times;</button>
            Created : {{ created_task.title }}
        </p>
    {% endif %}
    {% if removed_task %}
        <p class="alert alert-danger">
            <button type="button" class="close" data-dismiss="alert">&times;</button>
            Removed : {{ removed_task.title }}
        </p>
    {% endif %}
    <form method="post">
        {% csrf_token %}
        <p>
            <input class="span8" type="text" name="title" placeholder="Task title." /><br/>
            <textarea class="span8" rows=3 name="description" placeholder="Task description."></textarea><br/>
            <button class="btn btn-success" name="action" value="create_task">Create</button>
        </p>
        <hr/>
        {% for task in project.task_set.all %}
            <button class="btn btn-small btn-danger pull-left" type="submit" name="remove_task" value="{{ task.id }}">Remove</button>
            <p class="offset1">
                <a href="{% url 'task' task.id %}">{{ task.title }}</a></br>
                {{ task.description }}
            </p>
        {% endfor %}
    </form>
{% endblock %}