{% extends 'joltem/base.html' %}
{% block content %}
    <h3>{{ project.name }}</h3>
    <h4>Repositories</h4>
    {% if created %}
        <p class="alert alert-success">
            <button type="button" class="close" data-dismiss="alert">&times;</button>
            Created : {{ created.name }}
        </p>
    {% endif %}
    {% if removed %}
        <p class="alert alert-danger">
            <button type="button" class="close" data-dismiss="alert">&times;</button>
            Removed : {{ removed.name }}
        </p>
    {% endif %}
    <form method="post" class="form-inline">
        {% csrf_token %}
        <p>
            <input type="text" name="name" placeholder="Name, i.e. git-server"/>
            <input type="text" name="description" placeholder="Description of repository."/>
            <button class="btn btn-success" type="submit" name="action" value="create_repo">Create</button>
        </p>
        {% for repo in project.repository_set.all %}
            <p>
                <button class="btn btn-mini btn-danger pull-right" type="submit" name="remove" value="{{ repo.id }}">Remove</button>
                <a href="{% url 'repository' repo.name %}">{{ repo.name }}</a><br/>
                {{ repo.description }}
            </p>
        {% endfor %}
    </form>
    <h4>Tasks</h4>
    {% for task in project.task_set.all %}
        <dl class="dl-horizontal">
            <dt><a href="{% url 'task' task.id %}">{{ task.title }}</a></dt>
            <dd>{{ task.description }}</dd>
        </dl>
    {% endfor %}
{% endblock %}